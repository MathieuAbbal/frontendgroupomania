{"version":3,"sources":["webpack:///./src/views/Post.vue","webpack:///./src/components/ModifyPost.vue","webpack:///./src/components/ModifyPost.vue?bd06","webpack:///./src/views/Post.vue?0a22"],"names":["class","connected","for","fill","xmlns","viewBox","d","id","type","post","title","content","name","onFileChange","imageurl","src","modifyOnePost","toggleModal","deleteOnePost","visible","data","modifiedContent","mounted","this","getOnePost","methods","post_id","$route","params","a","get","headers","JSON","parse","sessionStorage","user","token","then","res","delete","window","location","reload","FormData","append","document","getElementById","value","files","put","href","e","file","target","URL","createObjectURL","render","components","Header","LoginForm","ModifyPost","userConnected","undefined","console","log","created"],"mappings":"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","file":"js/chunk-2d0baaa9.98d6895f.js","sourcesContent":["<template>\r\n  <div class=\"\">\r\n    <LoginForm v-if=\"!connected\"/>\r\n    <Header v-if=\"connected\"/>\r\n    <ModifyPost v-if=\"connected\"/>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport LoginForm from '@/components/LoginForm.vue';\r\nimport Header from '@/components/Header.vue';\r\nimport ModifyPost from '@/components/ModifyPost.vue';\r\n\r\n\r\n\r\nexport default {\r\n  name: 'Post',\r\n\r\n  components: {\r\n    Header,\r\n    LoginForm,\r\n    ModifyPost,\r\n\r\n    \r\n  },\r\n\r\n  data() {\r\n    return{\r\n      connected: true\r\n      \r\n    };\r\n  },\r\n\r\n  methods: {\r\n    userConnected(){\r\n      if(sessionStorage.user !== undefined){\r\n        this.connected = true;\r\n        console.log('Utilisateur connecté !');\r\n      }\r\n      else if(sessionStorage.user == undefined){\r\n        this.connected = false;\r\n        console.log('Utilisateur non connecté !');\r\n      }\r\n    }\r\n  },\r\n\r\n  created(){\r\n    this.userConnected()\r\n  }\r\n}\r\n\r\n</script>\r\n","<template>\r\n  <div class=\"m-auto px-4 py-8 max-w-xl\">\r\n      \r\n        <form class=\"flex flex-col bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\"  >\r\n            \r\n            <label for=\"modify-title\" class=\"block text-gray-700 text-sm font-bold mb-2\">Modifier le titre :</label>\r\n            <input class=\"border border-gray-300 p-2 mb-8\" type=\"text\" id=\"modify-title\" v-model=\"this.post.title\">\r\n           \r\n            <label for=\"modify-content\" class=\"block text-gray-700 text-sm font-bold mb-2\">Modifier le contenu :</label>            \r\n            <textarea class=\"lg:h-56 border border-gray-300 p-2 mb-8\" id=\"modify-content\" v-model=\"this.post.content\"></textarea>\r\n           \r\n            <label for=\"modifyPost-img\" class=\"block text-gray-700 text-sm font-bold mb-2\">Modifier image :</label>\r\n            <div class=\"m-4 flex justify-center transition duration-500 ease-in-out transform hover:-translate-y-1 hover:scale-110 \">\r\n                <label class=\"text-sm font-bold text-gray-500  w-64 flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg shadow-lg tracking-wide  border border-blue cursor-pointer hover:bg-blue \">\r\n                    <svg class=\"w-8 h-8 \" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\r\n                        <path d=\"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z\" />\r\n                    </svg>\r\n                    <span class=\"mt-2 text-base leading-normal\">Choisir un fichier</span>\r\n                    <input type='file' class=\"hidden\" name=\"imageurl\" id=\"imageurl\" @change=\"onFileChange\" />\r\n                    <div id=\"preview\" class=\" object-cover  mx-4  shadow\">\r\n                        <img v-if=\"imageurl\" :src=\"imageurl\" class=\"flex\"/>\r\n                    </div>\r\n                </label>\r\n            </div>\r\n        </form>\r\n       \r\n        <div class=\"flex flex-col\" >               \r\n            <button class=\"cursor-pointer m-2 bg-gray-800 hover:bg-green-500 text-white text-sm py-2 px-4 font-semibold rounded focus:outline-none focus:shadow-outline h-10\" type=\"button\" v-on:click=\"modifyOnePost()\"  >Publier les modifications</button>\r\n            <button class=\"cursor-pointer m-2 bg-gray-800 hover:bg-red-500 text-white text-sm py-2 px-4 font-semibold rounded focus:outline-none focus:shadow-outline h-10\" v-on:click=\"toggleModal()\" >Supprimer le post</button>\r\n        </div>\r\n        <div v-show=\"visible\" class=\"overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex\">\r\n            <div class=\"relative w-auto my-6 mx-auto max-w-sm\">                 \r\n                <div class=\"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none\">                    \r\n                    <div class=\"flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t\">\r\n                        <h3 class=\"text-3xl font-semibold\">Etes-vous sûr de vouloir supprimer votre Publication ?</h3>\r\n                        <button class=\"p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none\" v-on:click=\"toggleModal()\">\r\n                            <span class=\"bg-transparent text-black opacity-5 h-6 w-6 text-2xl block outline-none focus:outline-none\">×</span>\r\n                        </button>\r\n                    </div>                 \r\n                    <div class=\"flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b\">\r\n                         <button class=\"text-red-500 bg-transparent border border-solid border-red-500 hover:bg-red-500 hover:text-white active:bg-red-600 font-bold uppercase text-sm px-6 py-3 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150\" type=\"button\" v-on:click=\"toggleModal()\">\r\n                        Annuler\r\n                       </button>\r\n                       <button class=\"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150\" type=\"button\" @click=\"deleteOnePost()\">\r\n                         Supprimer\r\n                        </button>\r\n                     </div>\r\n                   </div>\r\n                  </div>                  \r\n            </div> \r\n            <div v-show=\"visible\" class=\"opacity-25 fixed inset-0 z-40 bg-black\"></div> \r\n       \r\n    </div>            \r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default{\r\n    name: 'ModifyPost',\r\n\r\n    data(){\r\n        return{\r\n            modifiedContent:'',\r\n            post:[],\r\n            visible: false,\r\n            imageurl:'',  \r\n            title:''          \r\n            \r\n        }\r\n    },\r\n    mounted(){\r\n        this.getOnePost();        \r\n    },\r\n    methods:{\r\n        getOnePost(){\r\n        const post_id = this.$route.params.id;\r\n\r\n        axios.get(`https://backendgroupomania.herokuapp.com/api/posts/${post_id}`,\r\n            { \r\n                headers: {\r\n                    'Content-Type':'application/json',\r\n                    'Authorization': `Bearer `+ JSON.parse(sessionStorage.user).token\r\n                }\r\n            }\r\n        )\r\n        .then(res => this.post = res.data)\r\n         \r\n            \r\n        \r\n         \r\n        },\r\n        deleteOnePost(){\r\n            const post_id = this.$route.params.id;\r\n\r\n            axios.delete(`https://backendgroupomania.herokuapp.com/api/posts/${post_id}`,\r\n            { \r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                  'Authorization': `Bearer `+ JSON.parse(sessionStorage.user).token\r\n                }\r\n            }\r\n        )\r\n        .then(()=> window.location.reload())\r\n        },\r\n        modifyOnePost(){\r\n            const post_id = this.$route.params.id;\r\n            let data = new FormData();\r\n                data.append(`title`, document.getElementById(\"modify-title\").value);\r\n                data.append(`content`, document.getElementById(\"modify-content\").value);\r\n                data.append(`image`, document.getElementById(\"imageurl\").files[0]);\r\n            \r\n            axios.put(`https://backendgroupomania.herokuapp.com/api/posts/${post_id}`,            \r\n              data,\r\n            { \r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                    'Authorization': `Bearer `+ JSON.parse(sessionStorage.user).token\r\n                }\r\n            }\r\n        )\r\n        .then(()=> location.href='/')\r\n        },\r\n        toggleModal(){\r\n            this.visible = !this.visible;\r\n        },\r\n       \r\n        onFileChange(e) {\r\n        const file = e.target.files[0];\r\n        this.imageurl = URL.createObjectURL(file);\r\n        }\r\n    }\r\n}\r\n</script>","import { render } from \"./ModifyPost.vue?vue&type=template&id=734dda9e\"\nimport script from \"./ModifyPost.vue?vue&type=script&lang=js\"\nexport * from \"./ModifyPost.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Post.vue?vue&type=template&id=1604866c\"\nimport script from \"./Post.vue?vue&type=script&lang=js\"\nexport * from \"./Post.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}